<style>
	.container{
		display: flex;
		flex-direction: row;
		align-content: center;
		align-items: flex-start;
		height: 100%;
		background-color: #F8E0E6;

	}

	.roomArea{
		/* Permalink - use to edit and share this gradient: http://colorzilla.com/gradient-editor/#f3e2c7+0,c19e67+50,b68d4c+51,e9d4b3+100;L+Brown+3D */
		background: rgb(243,226,199); /* Old browsers */
		background: -moz-linear-gradient(top,  rgba(243,226,199,1) 0%, rgba(193,158,103,1) 50%, rgba(182,141,76,1) 51%, rgba(233,212,179,1) 100%); /* FF3.6-15 */
		background: -webkit-linear-gradient(top,  rgba(243,226,199,1) 0%,rgba(193,158,103,1) 50%,rgba(182,141,76,1) 51%,rgba(233,212,179,1) 100%); /* Chrome10-25,Safari5.1-6 */
		background: linear-gradient(to bottom,  rgba(243,226,199,1) 0%,rgba(193,158,103,1) 50%,rgba(182,141,76,1) 51%,rgba(233,212,179,1) 100%); /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */
		filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#f3e2c7', endColorstr='#e9d4b3',GradientType=0 ); /* IE6-9 */

		width: calc(20%-20px);
		height: calc(100% - 20px);

		border: 1px solid #B9BDC1;
    color: #797979;
    -moz-box-shadow: 0 2px 4px #bbb inset;
    -webkit-box-shadow: 0 2px 4px #BBB inset;
    box-shadow: 0 2px 4px #BBB inset;
    -moz-border-radius: 3px;
    -webkit-border-radius: 3px;
    border-radius: 3px;

		padding: 10px;
	}

	.room{
		-moz-border-radius-bottomright: 30px;
    -webkit-border-bottom-right-radius: 30px;
    border-bottom-right-radius: 30px;
    border: 1px solid #848484;
    outline:0;
    height:25px;
    width: 275px;
    padding-right:20px;
		background: transparent url(http://html-generator.weebly.com/files/theme/input-text-8.png) repeat-x;

	}
	.room:hover {
    color: grey;
	}

	/*--------------------------------------------*/

	.chatArea{
		background-color: #F8E0E6;
		width: 65%;
		height: 100%;

		border: 1px solid #B9BDC1;
    color: #797979;
    -moz-box-shadow: 0 2px 4px #bbb inset;
    -webkit-box-shadow: 0 2px 4px #BBB inset;
    box-shadow: 0 2px 4px #BBB inset;
    -moz-border-radius: 3px;
    -webkit-border-radius: 3px;
    border-radius: 3px;

	}

	.chatLog{
		width: calc(100%-20px);
		height: calc(100% - 55px);

		/* Permalink - use to edit and share this gradient: http://colorzilla.com/gradient-editor/#f4e9e6+0,e2d0c7+50,ddc6bc+51,eac0c2+100 */
		background: rgb(244,233,230); /* Old browsers */
		background: -moz-linear-gradient(top,  rgba(244,233,230,1) 0%, rgba(226,208,199,1) 50%, rgba(221,198,188,1) 51%, rgba(234,192,194,1) 100%); /* FF3.6-15 */
		background: -webkit-linear-gradient(top,  rgba(244,233,230,1) 0%,rgba(226,208,199,1) 50%,rgba(221,198,188,1) 51%,rgba(234,192,194,1) 100%); /* Chrome10-25,Safari5.1-6 */
		background: linear-gradient(to bottom,  rgba(244,233,230,1) 0%,rgba(226,208,199,1) 50%,rgba(221,198,188,1) 51%,rgba(234,192,194,1) 100%); /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */
		filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#f4e9e6', endColorstr='#eac0c2',GradientType=0 ); /* IE6-9 */




		padding: 10px;


	}
	.chatInput{
		/* Permalink - use to edit and share this gradient: http://colorzilla.com/gradient-editor/#4c4c4c+0,595959+12,666666+25,474747+39,2c2c2c+50,000000+51,111111+60,2b2b2b+76,1c1c1c+91,131313+100;Black+Gloss+%231 */
		background: rgb(76,76,76); /* Old browsers */
		background: -moz-linear-gradient(top,  rgba(76,76,76,1) 0%, rgba(89,89,89,1) 12%, rgba(102,102,102,1) 25%, rgba(71,71,71,1) 39%, rgba(44,44,44,1) 50%, rgba(0,0,0,1) 51%, rgba(17,17,17,1) 60%, rgba(43,43,43,1) 76%, rgba(28,28,28,1) 91%, rgba(19,19,19,1) 100%); /* FF3.6-15 */
		background: -webkit-linear-gradient(top,  rgba(76,76,76,1) 0%,rgba(89,89,89,1) 12%,rgba(102,102,102,1) 25%,rgba(71,71,71,1) 39%,rgba(44,44,44,1) 50%,rgba(0,0,0,1) 51%,rgba(17,17,17,1) 60%,rgba(43,43,43,1) 76%,rgba(28,28,28,1) 91%,rgba(19,19,19,1) 100%); /* Chrome10-25,Safari5.1-6 */
		background: linear-gradient(to bottom,  rgba(76,76,76,1) 0%,rgba(89,89,89,1) 12%,rgba(102,102,102,1) 25%,rgba(71,71,71,1) 39%,rgba(44,44,44,1) 50%,rgba(0,0,0,1) 51%,rgba(17,17,17,1) 60%,rgba(43,43,43,1) 76%,rgba(28,28,28,1) 91%,rgba(19,19,19,1) 100%); /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */
		filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#4c4c4c', endColorstr='#131313',GradientType=0 ); /* IE6-9 */

		display: flex;
		align-items: center;

		width: calc(100% - 10px)
		height: 25px;
		padding: 5px;
	}

	.textbox{
		background-color: white;
		width: calc(100% - 50px);
		height: 30px;

		padding-left: 10px;
		padding-right: 10px;

		border: 1px solid #848484;
	 	-webkit-border-radius: 30px;
	 	-moz-border-radius: 30px;
	 	border-radius: 30px;
	 	outline:0;
	}

	.button{
		/* Permalink - use to edit and share this gradient: http://colorzilla.com/gradient-editor/#f2f6f8+0,d8e1e7+50,b5c6d0+51,e0eff9+100;Grey+Gloss+%232 */
		background: rgb(242,246,248); /* Old browsers */
		background: -moz-linear-gradient(top,  rgba(242,246,248,1) 0%, rgba(216,225,231,1) 50%, rgba(181,198,208,1) 51%, rgba(224,239,249,1) 100%); /* FF3.6-15 */
		background: -webkit-linear-gradient(top,  rgba(242,246,248,1) 0%,rgba(216,225,231,1) 50%,rgba(181,198,208,1) 51%,rgba(224,239,249,1) 100%); /* Chrome10-25,Safari5.1-6 */
		background: linear-gradient(to bottom,  rgba(242,246,248,1) 0%,rgba(216,225,231,1) 50%,rgba(181,198,208,1) 51%,rgba(224,239,249,1) 100%); /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */
		filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#f2f6f8', endColorstr='#e0eff9',GradientType=0 ); /* IE6-9 */

		border-radius: 12px;

    color: black;
    border: 1px solid #848484;
		-webkit-transition-duration: 0.4s; /* Safari */
    transition-duration: 0.4s;
		box-shadow: 0 8px 16px 0 rgba(0,0,0,0.2), 0 6px 20px 0 rgba(0,0,0,0.19);

		height: 30px;

	}
	.button:hover {
    color: grey;
	}


	/*--------------------------------------------*/

	.userArea{
		background-color: red;
		width: 15%;
		height: 100%;

		display: flex;
		flex-direction: column;


	}

	.userFace{

		text-align: center;

		/* Permalink - use to edit and share this gradient: http://colorzilla.com/gradient-editor/#f3e2c7+0,c19e67+50,b68d4c+51,e9d4b3+100;L+Brown+3D */
		background: rgb(243,226,199); /* Old browsers */
		background: -moz-linear-gradient(top,  rgba(243,226,199,1) 0%, rgba(193,158,103,1) 50%, rgba(182,141,76,1) 51%, rgba(233,212,179,1) 100%); /* FF3.6-15 */
		background: -webkit-linear-gradient(top,  rgba(243,226,199,1) 0%,rgba(193,158,103,1) 50%,rgba(182,141,76,1) 51%,rgba(233,212,179,1) 100%); /* Chrome10-25,Safari5.1-6 */
		background: linear-gradient(to bottom,  rgba(243,226,199,1) 0%,rgba(193,158,103,1) 50%,rgba(182,141,76,1) 51%,rgba(233,212,179,1) 100%); /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */
		filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#f3e2c7', endColorstr='#e9d4b3',GradientType=0 ); /* IE6-9 */

		width: calc(100%-20px);
		height: calc(40%-20px);

		border: 1px solid #B9BDC1;
    color: #797979;
    -moz-box-shadow: 0 2px 4px #bbb inset;
    -webkit-box-shadow: 0 2px 4px #BBB inset;
    box-shadow: 0 2px 4px #BBB inset;
    -moz-border-radius: 3px;
    -webkit-border-radius: 3px;
    border-radius: 3px;

		padding: 10px;
	}

	.userLogo{
		text-align: center;

		/* Permalink - use to edit and share this gradient: http://colorzilla.com/gradient-editor/#f3e2c7+0,c19e67+50,b68d4c+51,e9d4b3+100;L+Brown+3D */
		background: rgb(243,226,199); /* Old browsers */
		background: -moz-linear-gradient(top,  rgba(243,226,199,1) 0%, rgba(193,158,103,1) 50%, rgba(182,141,76,1) 51%, rgba(233,212,179,1) 100%); /* FF3.6-15 */
		background: -webkit-linear-gradient(top,  rgba(243,226,199,1) 0%,rgba(193,158,103,1) 50%,rgba(182,141,76,1) 51%,rgba(233,212,179,1) 100%); /* Chrome10-25,Safari5.1-6 */
		background: linear-gradient(to bottom,  rgba(243,226,199,1) 0%,rgba(193,158,103,1) 50%,rgba(182,141,76,1) 51%,rgba(233,212,179,1) 100%); /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */
		filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#f3e2c7', endColorstr='#e9d4b3',GradientType=0 ); /* IE6-9 */

		width: calc(100%-20px);
		height: calc(30%-20px);

		border: 1px solid #B9BDC1;
    color: #797979;
    -moz-box-shadow: 0 2px 4px #bbb inset;
    -webkit-box-shadow: 0 2px 4px #BBB inset;
    box-shadow: 0 2px 4px #BBB inset;
    -moz-border-radius: 3px;
    -webkit-border-radius: 3px;
    border-radius: 3px;

		padding: 10px;
	}

	.userCredit{

		text-align: center;

		/* Permalink - use to edit and share this gradient: http://colorzilla.com/gradient-editor/#f3e2c7+0,c19e67+50,b68d4c+51,e9d4b3+100;L+Brown+3D */
		background: rgb(243,226,199); /* Old browsers */
		background: -moz-linear-gradient(top,  rgba(243,226,199,1) 0%, rgba(193,158,103,1) 50%, rgba(182,141,76,1) 51%, rgba(233,212,179,1) 100%); /* FF3.6-15 */
		background: -webkit-linear-gradient(top,  rgba(243,226,199,1) 0%,rgba(193,158,103,1) 50%,rgba(182,141,76,1) 51%,rgba(233,212,179,1) 100%); /* Chrome10-25,Safari5.1-6 */
		background: linear-gradient(to bottom,  rgba(243,226,199,1) 0%,rgba(193,158,103,1) 50%,rgba(182,141,76,1) 51%,rgba(233,212,179,1) 100%); /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */
		filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#f3e2c7', endColorstr='#e9d4b3',GradientType=0 ); /* IE6-9 */

		width: calc(100%-20px);
		height: calc(30%-20px);

		border: 1px solid #B9BDC1;
    color: #797979;
    -moz-box-shadow: 0 2px 4px #bbb inset;
    -webkit-box-shadow: 0 2px 4px #BBB inset;
    box-shadow: 0 2px 4px #BBB inset;
    -moz-border-radius: 3px;
    -webkit-border-radius: 3px;
    border-radius: 3px;

		padding: 10px;
	}



</style>



<script src="/socket.io/socket.io.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>
<script>

	var socket = io.connect('http://localhost:8080');
	var current_room;
	// on connection to server, ask for user's name with an anonymous callback
	socket.on('connect', function() {
		// call the server-side function 'adduser' and send one parameter (value of prompt)
		socket.emit('adduser', '<%= user.name.givenName %>','<%=  user.id %>' );
	});

	// listener, whenever the server emits 'updatechat', this updates the chat body
	socket.on('updatechat', function(username, data) {
		$('#conversation').append('<b>' + username + ':</b> ' + data + '<br>');
	});


	// listener, whenever the server emits 'updaterooms', this updates the room the client is in
	socket.on('updaterooms', function(rooms, current_room) {
		this.current_room = current_room;
		$('#rooms').empty();
		$.each(rooms, function(key, value) {
			if (value == current_room) {
				$('#rooms').append('<div>' + value + '</div>');
			} else {
				$('#rooms').append('<div><a href="#" onclick="switchRoom(\'<%=  user.id %>\',\'' + value + '\')"<button class="room">' + value + '</button></a></div>');
			}
		});
	});

	function switchRoom(user_id,room) {
		socket.emit('switchRoom',user_id , room);
	}
	socket.on('updateAddRooms', function(rooms) {
		$('#rooms').empty();
		$.each(rooms, function(key, value) {
			if (value == this.current_room) {
				$('#rooms').append('<div>' + value + '</div>');
			} else {
				$('#rooms').append('<div><a href="#" onclick="switchRoom(\'' + value + '\')">' +  + '</a></div>');
			}
		});
	});


	// on load of page
	$(function() {
		// when the client clicks SEND
		$('#datasend').click(function() {

			var message = $('#data').val();
			$('#data').val('');
			// tell server to execute 'sendchat' and send along one parameter
			socket.emit('sendchat', message);
		});

		// when the client hits ENTER on their keyboard
		$('#data').keypress(function(e) {
			if (e.which == 13) {
				$(this).blur();
				$('#datasend').focus().click();
			}
		});
		$('#addRoomButton').click(function() {
			var newroom_name = $('#roomName').val();
			$('#roomName').val('');
			socket.emit('addRoom','<%= user.id %>', newroom_name);
		});


		$('#username').text('<%= user.displayName %>');

	});
</script>
<div class="container">

	<div class="roomArea">

		<b>ROOMS</b>
		<input class="textbox" id="roomName" style="width:100px;" />
		<input class="button" type="button" id="addRoomButton" value="Create" />
		<div id="rooms"></div>

	</div>

	<div class="chatArea">

		<div class="chatLog" id="conversation"></div>
		<div class=chatInput>
			<input class="textbox" id="data"  />
			<input class="button" type="button" id="datasend" value="Send" />
		</div>

	</div>

	<div class="userArea">

		<div class="userFace">
			<img src="<%= user.photos[0].value %>" style="border-radius: 50%"></img>
			<br>
			<div id="username"></div>
			<br>
			<br>
		</div>

		<div class="userLogo">
				<img src="<%= user.photos[0].value %>" style="border-radius: 50%"></img>
				รูป Logo
		</div>

		<div class="userCredit">
			<p>ที่เหลือ ใส่ชื่อผู้จัดทำมะ</p>
		</div>

	</div>

</div>
